@startuml
abstract class A_Food {
  - string identifier
  - vector<string> keywords
  - double caloriesPerServing
  + {abstract} getIdentifier(): string
  + {abstract} getKeywords(): vector<string>
  + {abstract} getCalories(): double
}

class C_BasicFood {
  + constructor(string id, vector<string> keywords, double calories)
}

class C_CompositeFood {
  - vector<pair<A_Food*, double>> components
  + constructor(string id, vector<string> keywords)
  + addComponent(A_Food* food, double servings)
  + calculateTotalCalories(): double
}

class C_FoodDatabase {
  - vector<A_Food*> foods
  + addBasicFood(C_BasicFood* food)
  + addCompositeFood(C_CompositeFood* food)
  + searchFoodByKeywords(vector<string> keywords, bool matchAll): vector<A_Food*>
  + loadDatabase(string filename)
  + saveDatabase(string filename)
}

class C_DietProfile {
  - string gender
  - double height
  - double weight
  - int age
  - string activityLevel
  - enum CalorieCalculationMethod
  + updateProfile(string gender, double height, double weight, int age, string activityLevel)
  + calculateTargetCalories(): double
  + setCalorieCalculationMethod(CalorieCalculationMethod method)
}

interface I_Command {
  + execute()
  + undo()
}

class C_AddFoodCommand {
  - C_DailyLog* log
  - Date date
  - A_Food* food
  - double servings
  + execute()
  + undo()
}

class C_RemoveFoodCommand {
  - C_DailyLog* log
  - Date date
  - A_Food* food
  - double servings
  + execute()
  + undo()
}

class C_DailyLog {
  - map<Date, vector<pair<A_Food*, double>>> consumedFoods
  - vector<I_Command*> commandHistory
  + addFood(Date date, A_Food* food, double servings)
  + removeFood(Date date, A_Food* food)
  + undo()
  + getTotalCaloriesConsumed(Date date): double
  + loadLog(string filename)
  + saveLog(string filename)
}

class C_DietManager {
  - C_FoodDatabase foodDatabase
  - C_DietProfile userProfile
  - C_DailyLog dailyLog
  + runCLI()
  - displayMenu()
  - handleUserInput()
}

A_Food <|-- C_BasicFood
A_Food <|-- C_CompositeFood
I_Command <|.. C_AddFoodCommand
I_Command <|.. C_RemoveFoodCommand
C_FoodDatabase "1" *-- "*" A_Food : contains
C_DietManager "1" *-- "1" C_FoodDatabase
C_DietManager "1" *-- "1" C_DietProfile
C_DietManager "1" *-- "1" C_DailyLog
C_DailyLog "1" *-- "*" I_Command : tracks
C_CompositeFood "1" *-- "*" A_Food : composed of
@enduml